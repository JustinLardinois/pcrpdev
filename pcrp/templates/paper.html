{#
# Copyright 2014–2015 Justin Lardinois
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
###############################################################################
# pcrp/templates/paper.html - a component of pCRP
#
# template for paper editor
-#}
<!DOCTYPE html>
<html>
	<head>
		<title>{% if id == "new" %}New{% else %}Edit{% endif %} Paper —{{ " "
			}}{{ conference_name }}</title>
		<meta charset="UTF-8">
		
		<script type="text/javascript" src="/js/additional_authors.js"
			charset="UTF-8"></script>
		<script type="text/javascript">
			window.onload = function() {
				insert_add_button(document);
			};
		</script>
	</head>
	<body>
		<h1>{% if id == "new" %}New{% else %}Edit{% endif %} Paper —{{ " "
			}}{{ conference_name }}</h1>

		<nav>
			Logged in as {{ real_name }}
			(<a href="{{ hub_url }}">hub</a>)
			{% if admin %}
				(<a href="{{ admin_panel_url }}">admin panel</a>)
			{% endif %}
			(<a href="{{ logout_url }}">log out</a>)
		</nav>

		<div id="deadlines">
			<p>Paper registration deadline: {{ registration_deadline }}
				(UTC)</p>
			<p>Paper submission deadline: {{ submission_deadline }} (UTC)</p>
		</div>
		{% if update_success %}
			<p>Paper Updated Successfully</p>
		{% endif %}
		<noscript>Please Enable Javascript</noscript>
		<form accept-charset="UTF-8" action="{{ request.path }}"
			autocomplete="off" method="post">
			
			<label for="title">
				<span>Title</span>
				<input type="text" name="title" value="{{ title }}">
			</label>
			<fieldset id="authors">
				<legend>Additional Authors</legend>
				{# always at least three author fields #}
				{% for a in additional_authors %}
					<input type="text" name="additional_authors"
						value="{{ a }}">
				{% endfor %}
				{% if (3 - additional_authors|length) > 0 %}
					{% for n in range(3 - additional_authors|length) %}
						<input type="text" name="additional_authors">
					{% endfor %}
				{% endif %}
			</fieldset>
			<label for="abstract">
				<span>Abstract</span>
				<textarea name="abstract" cols="90" rows="20">
					{{- abstract -}}
				</textarea>
			</label>
			<input type="hidden" name="id" value="{{ id }}">
			<button type="submit">Save Changes</button>
		</form>
	</body>
</html>
